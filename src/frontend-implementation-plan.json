{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Pinned always-visible left sidebar on mobile with side-by-side layout",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Make the app layout always render left sidebar and main content side-by-side in a single flex/grid container at all breakpoints with a fixed ~250px sidebar width.",
      "acceptanceCriteria": [
        "On widths below 768px and above, the left sidebar is visible at the left edge and the main content renders to its right in the same row.",
        "Sidebar width remains fixed (â‰ˆ250px) and does not shrink below the intended width; main content fills remaining width.",
        "No breakpoint causes the sidebar to be removed from the document flow via hidden/display:none."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/layout/AppLayout.tsx",
          "operation": "modify",
          "description": "Refactor the layout to use one persistent side-by-side container for LeftSidebar + main content across all breakpoints (remove the mobile-only off-canvas/Sheet approach). Ensure the main content region uses flex-grow (or grid 1fr) and is placed to the right of the sidebar at all widths."
        },
        {
          "path": "frontend/src/components/layout/LeftSidebar.tsx",
          "operation": "modify",
          "description": "Update the sidebar wrapper styling to a fixed width targeting 250px (e.g., w-[250px]) with shrink-0 so it never collapses, and remove responsive hiding classes that prevent it from being laid out side-by-side at smaller breakpoints."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Keep the left sidebar visible on mobile and pinned to the left while scrolling, ensuring the main content is not covered.",
      "acceptanceCriteria": [
        "LeftSidebar is not using Tailwind classes (or CSS) that hide it on mobile (e.g., no `hidden` at base with `lg:flex` override).",
        "On mobile, scrolling the main content does not scroll the sidebar out of view; the sidebar remains pinned on the left (fixed or sticky).",
        "Main content is offset (e.g., via padding/margin/column layout) so it is never obscured by the pinned sidebar."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/layout/LeftSidebar.tsx",
          "operation": "modify",
          "description": "Remove mobile responsive hiding (e.g., hidden/lg:flex) and apply pinned positioning behavior for mobile (sticky or fixed, as appropriate) so the sidebar remains visible on the left while the user scrolls the main content."
        },
        {
          "path": "frontend/src/components/layout/AppLayout.tsx",
          "operation": "modify",
          "description": "Ensure the main content area layout accounts for the pinned sidebar (by keeping the sidebar in the same flex/grid row and ensuring main content sits to the right), preventing overlap/coverage at all breakpoints."
        }
      ]
    },
    {
      "id": "REQ-3",
      "summary": "Improve mobile touch targets and readability for left sidebar navigation and UI sound controls.",
      "acceptanceCriteria": [
        "On mobile, sidebar nav items have a minimum comfortable touch target (e.g., ~44px height) with adequate padding.",
        "Typography and icon sizing in the sidebar is responsive so labels/icons are readable without crowding or truncation for common device widths.",
        "UISoundControls remains fully accessible and usable in the sidebar on mobile without overlapping/clipping."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/layout/LeftSidebar.tsx",
          "operation": "modify",
          "description": "Adjust nav Button classNames for mobile: increase vertical padding/min-height, tune responsive text sizing, and adjust icon sizing/padding so 'Home', 'My Library', and other items are thumb-friendly. Ensure UISoundControls container spacing prevents clipping and keeps controls usable at small widths."
        }
      ]
    },
    {
      "id": "REQ-4",
      "summary": "Match mobile sidebar background styling to existing desktop dark styling using the same theme/tokens/classes.",
      "acceptanceCriteria": [
        "Mobile sidebar uses the same visual background treatment as desktop (same theme variables/classes used for the desktop sidebar containers).",
        "No sudden background color shift occurs when moving between desktop and mobile widths while in the same theme mode."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/layout/LeftSidebar.tsx",
          "operation": "modify",
          "description": "Ensure the sidebar's outer container and its card/panel sections use the same existing theme token classes already used on desktop (e.g., bg-card/bg-background + border-border variants) so the mobile sidebar matches the desktop dark appearance."
        }
      ]
    },
    {
      "id": "REQ-5",
      "summary": "Support very narrow screens by preventing sidebar shrink and allowing main content to scroll horizontally when needed.",
      "acceptanceCriteria": [
        "At very small widths, the sidebar width remains consistent and pinned; the UI does not collapse the sidebar or overlap it with main content.",
        "Main content can scroll horizontally when necessary (only when needed) without breaking vertical scrolling of the page content."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/layout/AppLayout.tsx",
          "operation": "modify",
          "description": "Update the main content container to support very narrow widths: keep sidebar shrink-0 and apply min-w-0 plus overflow-x-auto (in addition to existing vertical scrolling behavior) so the main region can scroll horizontally when content cannot shrink further."
        },
        {
          "path": "frontend/src/components/layout/LeftSidebar.tsx",
          "operation": "modify",
          "description": "Reinforce sidebar non-shrinking behavior at very small widths (fixed width + shrink-0) to ensure it remains visible and does not get compressed by main content."
        }
      ]
    },
    {
      "id": "REQ-6",
      "summary": "Keep header actions (Sign Out/LoginButton and Upload Track buttons) aligned within the main content region and never overlapping the pinned sidebar.",
      "acceptanceCriteria": [
        "On mobile and desktop, the authentication button (Sign Out/Sign In) is visually aligned to the right side of the main content region, not overlapping the sidebar.",
        "On pages that show an Upload Track action in the header area (e.g., My Library), the Upload Track button remains visible, right-aligned within main content, and does not overlap the sidebar at narrow widths.",
        "No header element is covered by the pinned sidebar when scrolling or resizing."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/layout/AppLayout.tsx",
          "operation": "modify",
          "description": "Move/implement the top header actions area (including LoginButton) inside the main content column (to the right of the sidebar) so it stays right-aligned within the main region and cannot overlap the pinned sidebar at any breakpoint."
        },
        {
          "path": "frontend/src/pages/MyLibraryPage.tsx",
          "operation": "modify",
          "description": "Adjust the My Library header row layout as needed for narrow widths (e.g., ensure wrapping/spacing) so the 'Upload Track' button remains right-aligned within the main content region and never sits under/overlaps the sidebar."
        },
        {
          "path": "frontend/src/pages/LibraryPage.tsx",
          "operation": "modify",
          "description": "Verify and adjust the Library page hero/header action layout as needed so the 'Upload Track' button remains within the main content region (to the right of the sidebar) and does not overlap at narrow widths."
        }
      ]
    }
  ]
}